import re

CRISIS_KEYWORDS = [
    "—Å—É–∏—Ü–∏–¥", "–Ω–µ —Ö–æ—á—É –∂–∏—Ç—å", "–ø–æ–∫–æ–Ω—á–∏—Ç—å —Å —Å–æ–±–æ–π", "—É–º–∏—Ä–∞—Ç—å", "—Ö–æ—á—É —É–º–µ—Ä–µ—Ç—å",
    "–ø—Å–∏—Ö–æ–∑", "–ø–∞–Ω–∏–∫–∞", "–±–æ–ª—å—à–µ –Ω–µ –º–æ–≥—É", "—Å–ª–æ–º–∞–ª–∞—Å—å", "–¥–µ–ø—Ä–µ—Å—Å–∏—è", "–∫—Ä–∏–∫ –æ –ø–æ–º–æ—â–∏"
]

def detect_crisis(message: str) -> bool:
    text = message.lower()
    return any(kw in text for kw in CRISIS_KEYWORDS)

def generate_crisis_response() -> str:
    return (
        "–Ø –æ—á–µ–Ω—å —Ü–µ–Ω—é —Ç–≤–æ—é –æ—Ç–∫—Ä–æ–≤–µ–Ω–Ω–æ—Å—Ç—å. –ü–æ—Ö–æ–∂–µ, —Å–µ–π—á–∞—Å —Ç–µ–±–µ —Ç—è–∂–µ–ª–æ. "
        "–í–∞–∂–Ω–æ –Ω–µ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è —Å —ç—Ç–∏–º –æ–¥–Ω–æ–π. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±—Ä–∞—Ç–∏—Å—å –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º:\n\n"
        "üìû –ì–æ—Ä—è—á–∞—è –ª–∏–Ω–∏—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø–æ–º–æ—â–∏: 8-800-2000-122\n"
        "üí¨ –ß–∞—Ç —Å –ø—Å–∏—Ö–æ–ª–æ–≥–æ–º: pomogut.ru\n\n"
        "–¢—ã –Ω–µ –æ–¥–Ω–∞ ‚Äî –ø–æ–º–æ—â—å —Ä—è–¥–æ–º. –Ø –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å, –Ω–æ –Ω–∞—Å—Ç–æ—è—â–∞—è –ø–æ–º–æ—â—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∂–∏–≤–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞."
    )

def sanitize_input(text: str) -> str:
    """
    –£–¥–∞–ª—è–µ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞.
    """
    text = re.sub(r'[^\w\s\-.,!?(){}[\]@]', '', text)
    return text.strip()
